const BTN_COMMENCER=document.querySelector(".js_btn-commencez"),ECRAN_COMMENCER=document.querySelector(".js_ecran-commencez"),ECRAN_DEBUG=document.querySelector(".js_debug"),INPUT_SWITCH=(BTN_COMMENCER.addEventListener("click",()=>{ECRAN_COMMENCER.classList.add("hide");var e=DOM_DIFFICULTE_SELECT.value;tirage(e),formulaire(DIFFICULTE[e].crant,DIFFICULTE[e].nbCouleur,CONTENEUR_FORMULAIRE),plateau(DIFFICULTE[e].nbEssai,DIFFICULTE[e].crant)}),document.getElementById("theme")),PREFERENCE_THEME=localStorage.getItem("mode");function switchTheme(e){e.target.checked?(document.documentElement.setAttribute("data-mode","light"),localStorage.setItem("mode","light")):(document.documentElement.setAttribute("data-mode","dark"),localStorage.setItem("mode","dark"))}PREFERENCE_THEME?(document.documentElement.setAttribute("data-mode",PREFERENCE_THEME),"light"===PREFERENCE_THEME&&(INPUT_SWITCH.checked=!0)):(document.documentElement.setAttribute("data-mode","dark"),localStorage.setItem("mode","dark")),INPUT_SWITCH.addEventListener("change",switchTheme,!1);const DOM_DIFFICULTE_SELECT=document.getElementById("difficulte"),DIFFICULTE={Normal:{crant:4,nbEssai:10,nbCouleur:6},Difficile:{crant:5,nbEssai:12,nbCouleur:8}};for(const c in DIFFICULTE)DOM_DIFFICULTE_SELECT.innerHTML+=`<option value="${c}">${c}</option>`;function dropdown(e){"true"===e.getAttribute("aria-expanded")?(e.setAttribute("aria-expanded","false"),e.parentNode.classList.remove("--ouvert"),e.parentNode.querySelector("ul").classList.add("hide")):(e.setAttribute("aria-expanded","true"),e.parentNode.classList.add("--ouvert"),e.parentNode.querySelector("ul").classList.remove("hide"))}function choixCouleur(e,t,n){let r=e.parentNode.parentNode.parentNode.querySelector(".js_dropdown-label");""!=r.dataset.code&&r.classList.remove(r.dataset.code),r.classList.add("code"+t),r.dataset.code="code"+t,CONTENEUR_FORMULAIRE.children[n].value="code"+t,dropdown(r)}function essaiCombinaison(n){for(var r=INPUT_TIRAGE.value.split(","),a=[],e=document.querySelectorAll(".js_select"),t=0;t<e.length;t++){if(""==e[t].value)return!1;a.push(e[t].value)}if(JSON.stringify(a)==JSON.stringify(r))gagne();else{var i=DOM_DIFFICULTE_SELECT.value;if(DIFFICULTE[i].nbEssai==n)return perdu(),!1;let e=0,t=0;for(var o=[],E=[],c=0;c<r.length;c++)r[c]===a[c]?e++:(o.push(r[c]),E.push(a[c]));for(var d=0;d<o.length;d++)if(""!=o[d])for(var s=0;s<E.length;s++)if(o[d]===E[s]){o[d]="",E[s]="",t++;break}majPlateau(n,a,e,t)}}const MESSAGE=document.querySelector(".js_message-fin");function gagne(){MESSAGE.innerHTML="GagnÃ© !",ecranFin()}function perdu(){MESSAGE.innerHTML="Perdu !",ecranFin()}function ecranFin(){ECRAN_RECOMMENCEZ.classList.remove("hide"),ECRAN_DECHIFFREUR.classList.add("hide")}const CONTENEUR_FORMULAIRE=document.querySelector(".js_form");function formulaire(e,t,n){let r="";r+='<option value="">Selectionnez</option>';for(let e=1;e<t+1;e++)r+=`<option value="code${e}">Code ${e}</option>`;let a=0,o="";for(;a<e;)o+=`<select id="crant-${a}" class="js_select">${r}</select>`,a++;n.innerHTML=o}let PLATEAU={manche:[]};const DOM_PLATEAU=document.querySelector(".js_plateau");function plateau(t,n){for(let e=0;e<t;e++)PLATEAU.manche[e]={},PLATEAU.manche[e].essaiNumero=e+1,0==e?setPresent(e):(PLATEAU.manche[e].type="Futur",PLATEAU.manche[e].nombreCrant=n);compileHanlebars(),ECRAN_DECHIFFREUR.classList.remove("hide")}function setPresent(n){var e=DOM_DIFFICULTE_SELECT.value,r=DIFFICULTE[e].crant,a=DIFFICULTE[e].nbCouleur;PLATEAU.manche[n].type="Present",PLATEAU.manche[n].dropdown=[],PLATEAU.manche[n].dropdown.crant=[];for(let t=0;t<r;t++){PLATEAU.manche[n].dropdown.crant[t]=[],PLATEAU.manche[n].dropdown.crant[t].idCouleur=[];for(let e=0;e<a;e++)PLATEAU.manche[n].dropdown.crant[t].idItem=t,PLATEAU.manche[n].dropdown.crant[t].idCouleur[e]=e+1}}function compileHanlebars(){var e=document.querySelector("#manche").innerHTML;let t=Handlebars.compile(e);DOM_PLATEAU.innerHTML=t(PLATEAU)}function majPlateau(t,n,r,a){PLATEAU.manche[t-1].type="Passer",delete PLATEAU.manche[t-1].dropdown,PLATEAU.manche[t-1].essai=[];for(const e in n)PLATEAU.manche[t-1].essai[e]=n[e];PLATEAU.manche[t-1].correction=[];n.length;for(let e=0;e<n.length;e++)0!=r?(PLATEAU.manche[t-1].correction[e]=" --n",r--):0!=a?(PLATEAU.manche[t-1].correction[e]=" --b",a--):PLATEAU.manche[t-1].correction[e]="";setPresent(t),compileHanlebars()}const BTN_RECOMMENCER=document.querySelector(".js_btn-recommencez"),BTN_REGLES=(BTN_RECOMMENCER.addEventListener("click",()=>{ECRAN_DEBUG.classList.add("hide"),ECRAN_COMMENCER.classList.remove("hide"),PLATEAU={manche:[]},DOM_PLATEAU.innerHTML="",ECRAN_DECHIFFREUR.classList.add("hide"),ECRAN_RECOMMENCEZ.classList.add("hide")}),Handlebars.registerHelper("ifEquals",function(e,t,n){return e==t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("repeat",function(e,t){for(var n="",r=0;r<e;++r)n+=t.fn(r);return n}),Handlebars.registerHelper("addZero",function(e,t){var n=e.toString().length;let r="";return r=1==n?"0"+e:e}),document.querySelector(".js_regles")),BTN_FERMER_REGLES=document.querySelector(".js_fermer-regles"),ECRAN_REGLES=document.querySelector(".js_ecran-regles"),ECRAN_DECHIFFREUR=document.querySelector(".js_ecran-dechiffreur"),ECRAN_RECOMMENCEZ=document.querySelector(".js_ecran-recommencez"),COULEURS=(BTN_REGLES.addEventListener("click",()=>{ECRAN_REGLES.classList.remove("hide"),ECRAN_COMMENCER.classList.add("hide"),ECRAN_DECHIFFREUR.classList.add("hide"),ECRAN_RECOMMENCEZ.classList.add("hide")}),BTN_FERMER_REGLES.addEventListener("click",()=>{ECRAN_REGLES.classList.add("hide"),ECRAN_COMMENCER.classList.remove("hide"),ECRAN_DECHIFFREUR.classList.remove("hide"),ECRAN_RECOMMENCEZ.classList.remove("hide")}),["code1","code2","code3","code4","code5","code6","code7","code8"]),INPUT_TIRAGE=document.getElementById("tirage");let tirage=e=>{var t=DIFFICULTE[e].nbCouleur,n=DIFFICULTE[e].crant;let r=0,a=0,o=[],E=[];for(;r<t;)o.push(COULEURS[r]),r++;for(;a<n;){var c=o[Math.floor(Math.random()*o.length)];E.push(c),a++}INPUT_TIRAGE.value=E};