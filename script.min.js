const BTN_COMMENCER=document.querySelector(".js_btn-commencez"),ECRAN_COMMENCER=document.querySelector(".js_ecran-commencez"),ECRAN_DEBUG=document.querySelector(".js_debug"),INPUT_SWITCH=(BTN_COMMENCER.addEventListener("click",()=>{ECRAN_DEBUG.classList.remove("hide"),ECRAN_RECOMMENCEZ.classList.remove("hide"),ECRAN_COMMENCER.classList.add("hide");var e=DOM_DIFFICULTE_SELECT.value;tirage(e),formulaire(DIFFICULTE[e].crant,DIFFICULTE[e].nbCouleur,CONTENEUR_FORMULAIRE),plateau(DIFFICULTE[e].nbEssai,DIFFICULTE[e].crant,DIFFICULTE[e].nbCouleur)}),document.getElementById("theme")),PREFERENCE_THEME=localStorage.getItem("mode");function switchTheme(e){e.target.checked?(document.documentElement.setAttribute("data-mode","light"),localStorage.setItem("mode","light")):(document.documentElement.setAttribute("data-mode","dark"),localStorage.setItem("mode","dark"))}PREFERENCE_THEME?(document.documentElement.setAttribute("data-mode",PREFERENCE_THEME),"light"===PREFERENCE_THEME&&(INPUT_SWITCH.checked=!0)):(document.documentElement.setAttribute("data-mode","dark"),localStorage.setItem("mode","dark")),INPUT_SWITCH.addEventListener("change",switchTheme,!1);const DOM_DIFFICULTE_SELECT=document.getElementById("difficulte"),DIFFICULTE={Debug:{crant:3,nbEssai:3,nbCouleur:3},Normal:{crant:4,nbEssai:10,nbCouleur:6},Difficile:{crant:5,nbEssai:12,nbCouleur:8}};for(const c in DIFFICULTE)DOM_DIFFICULTE_SELECT.innerHTML+=`<option value="${c}">${c}</option>`;function dropdown(e){"true"===e.getAttribute("aria-expanded")?(e.setAttribute("aria-expanded","false"),e.parentNode.classList.remove("--ouvert"),e.parentNode.querySelector("ul").classList.add("hide")):(e.setAttribute("aria-expanded","true"),e.parentNode.classList.add("--ouvert"),e.parentNode.querySelector("ul").classList.remove("hide"))}function choixCouleur(e,t,o){let n=e.parentNode.parentNode.parentNode.querySelector(".js_dropdown-label");""!=n.dataset.code&&n.classList.remove(n.dataset.code),n.classList.add("code"+t),n.dataset.code="code"+t,CONTENEUR_FORMULAIRE.children[o].value="code"+t,dropdown(n)}function essaiCombinaison(e){var o=INPUT_TIRAGE.value.split(",");let n=[];for(var t=document.querySelectorAll(".essai-"+e),r=0;r<t.length;r++){if(""==t[r].value)return!1;n.push(t[r].value)}if(JSON.stringify(n)==JSON.stringify(o))gagne();else{let e=0,t=0;console.log("tirage : "+o+"\n combinaison : "+n);for(var E=[],a=[],c=0;c<o.length;c++)o[c]===n[c]?e++:(E.push(o[c]),a.push(n[c]));for(var s=0;s<E.length;s++)if(""!=E[s])for(var d=0;d<a.length;d++)if(E[s]===a[d]){E[s]="",a[d]="",t++;break}console.log("total noir : "+e+"\n total blanc : "+t)}}const CONTENEUR_FORMULAIRE=document.querySelector(".js_form");function formulaire(e,t,o,n){void 0===n&&(n=1);let r="";r+='<option value="">Selectionnez</option>';for(let e=1;e<t+1;e++)r+=`<option value="code${e}">Code ${e}</option>`;let E=0,a="";for(;E<e;)a+=`<select id="essai-${n}-${E}" class="essai-${n}">${r}</select>`,E++;a+=`<button onclick="essaiCombinaison(${n})">Try this</button>`,o.innerHTML=a}const MESSAGE=document.querySelector(".js_message-fin");function gagne(){MESSAGE.innerHTML="Gagn√© !"}let PLATEAU={manche:[]};function plateau(e,n,r,t){let E=e;for(let o=0;o<e;o++)if(PLATEAU.manche[o]={},PLATEAU.manche[o].essaiNumero=E--,o==e-1){PLATEAU.manche[o].type="Present",PLATEAU.manche[o].dropdown=[],PLATEAU.manche[o].dropdown.crant=[];for(let t=0;t<n;t++){PLATEAU.manche[o].dropdown.crant[t]=[],PLATEAU.manche[o].dropdown.crant[t].idCouleur=[];for(let e=0;e<r;e++)PLATEAU.manche[o].dropdown.crant[t].idItem=t,PLATEAU.manche[o].dropdown.crant[t].idCouleur[e]=e+1}}else PLATEAU.manche[o].type="Futur",PLATEAU.manche[o].nombreCrant=n;console.log(PLATEAU);var o=document.querySelector("#manche").innerHTML,o=Handlebars.compile(o);ECRAN_DECHIFFREUR.innerHTML=o(PLATEAU),ECRAN_DECHIFFREUR.classList.remove("hide")}const BTN_RECOMMENCER=document.querySelector(".js_btn-recommencez"),BTN_REGLES=(BTN_RECOMMENCER.addEventListener("click",()=>{ECRAN_DEBUG.classList.add("hide"),ECRAN_COMMENCER.classList.remove("hide"),PLATEAU={manche:[]},ECRAN_DECHIFFREUR.innerHTML="",ECRAN_DECHIFFREUR.classList.add("hide"),ECRAN_RECOMMENCEZ.classList.add("hide")}),Handlebars.registerHelper("ifEquals",function(e,t,o){return e==t?o.fn(this):o.inverse(this)}),Handlebars.registerHelper("repeat",function(e,t){for(var o="",n=0;n<e;++n)o+=t.fn(n);return o}),Handlebars.registerHelper("addZero",function(e,t){var o=e.toString().length;let n="";return n=1==o?"0"+e:e}),document.querySelector(".js_regles")),BTN_FERMER_REGLES=document.querySelector(".js_fermer-regles"),ECRAN_REGLES=document.querySelector(".js_ecran-regles"),ECRAN_DECHIFFREUR=document.querySelector(".js_ecran-dechiffreur"),ECRAN_RECOMMENCEZ=document.querySelector(".js_ecran-recommencez"),COULEURS=(BTN_REGLES.addEventListener("click",()=>{ECRAN_REGLES.classList.remove("hide"),ECRAN_COMMENCER.classList.add("hide"),ECRAN_DECHIFFREUR.classList.add("hide"),ECRAN_RECOMMENCEZ.classList.add("hide")}),BTN_FERMER_REGLES.addEventListener("click",()=>{ECRAN_REGLES.classList.add("hide"),ECRAN_COMMENCER.classList.remove("hide"),ECRAN_DECHIFFREUR.classList.remove("hide"),ECRAN_RECOMMENCEZ.classList.remove("hide")}),["code1","code2","code3","code4","code5","code6","code7","code8"]),INPUT_TIRAGE=document.getElementById("tirage");let tirage=e=>{var t=DIFFICULTE[e].nbCouleur,o=DIFFICULTE[e].crant;let n=0,r=0,E=[],a=[];for(;n<t;)E.push(COULEURS[n]),n++;for(;r<o;){var c=E[Math.floor(Math.random()*E.length)];a.push(c),r++}INPUT_TIRAGE.value=a};